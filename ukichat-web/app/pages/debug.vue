<script setup lang="ts">
import {useSignalR} from "~/composables/useSignalR";

const {startSignalR, invokeGet, invokeUpdate} = useSignalR()

async function sendTestMessage() {
  await invokeUpdate("SendChatMessage", generateMessage2())
}

function generateMessage1() {
  return {
    platform: "Twitch",
    badges: [
      "https://static-cdn.jtvnw.net/badges/v1/3267646d-33f0-4b17-b3df-f923a41db1d0/3",
      "https://static-cdn.jtvnw.net/badges/v1/3ffa9565-c35b-4cad-800b-041e60659cf2/3"
    ],
    displayName: "Nightbot",
    messageParts: [
      {
        type: "Text",
        content: "ĞšĞ¾Ñ€Ğ¾Ñ‡Ğµ Ğ¼Ğ¾Ğ¹ Ğ²Ğ°Ğ¼ ÑĞ¾Ğ²ĞµÑ‚. ĞĞµ Ğ»ĞµĞ·ÑŒÑ‚Ğµ Ğ²Ğ¾Ğ¾Ğ±Ñ‰Ğµ Ğ² Ñ€ĞµÑ‚Ñ€Ğ¾ Ğ¸ Ğ½Ğ¸ Ğ² ĞºĞ¾ĞµĞ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ğ¹Ñ‚Ğµ ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸. Ğ˜Ğ½Ğ°Ñ‡Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚Ğµ Ğ»ÑƒĞ´Ğ¾Ğ¼Ğ°Ğ½ÑÑ‚Ğ²Ğ¾Ğ¼ ĞºĞ°Ğº Ñ, ĞºĞ¾Ğ³Ğ´Ğ° Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹Ğ²ĞµÑÑ‚Ğ¸ Ğ±Ğ¾Ğ»ĞµĞµ Ñ‡Ñ‘Ñ‚ĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ğ³Ñ€Ñ‘Ğ±Ğ°Ğ½Ñ‹Ğ¹ Ğ¿Ğ¸ĞºÑĞµĞ»ÑŒ Ğ²Ñ‹ Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ñ‚Ğµ Ğ½Ğ° ÑÑ‚Ğ¾ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ 10Ğº ğŸ˜Ğ¡Ñ‚Ğ°Ğ²Ğ¸ÑˆÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ ÑĞ¼ÑƒĞ»ÑÑ‚Ğ¾Ñ€Ñ‹ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿ Ğ¸ Ñ€Ğ°Ğ´ÑƒĞµÑˆÑŒÑÑ Ğ¶Ğ¸Ğ·Ğ½Ğ¸, Ğ° Ğ½Ğµ Ğ²Ğ¾Ñ‚ ÑÑ‚Ğ¾ Ğ²ÑÑ‘"
      }
    ]
  }
}

function generateMessage2() {
  return {
    platform: "Twitch",
    badges: [
      "https://static-cdn.jtvnw.net/badges/v1/3158e758-3cb4-43c5-94b3-7639810451c5/3"
    ],
    displayName: "Moberator1",
    messageParts: [
      {
        type: "Text",
        content: "Ğ° Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‚ÑŒ? "
      },
      {
        type: "Emote",
        content: "https://static-cdn.jtvnw.net/emoticons/v2/304486324/default/dark/3.0"
      }
    ]
  }
}

onMounted(async () => {
  await startSignalR()
})

</script>

<template>
  <UButton @click="sendTestMessage">Test Message</UButton>
</template>

<style scoped>

</style>